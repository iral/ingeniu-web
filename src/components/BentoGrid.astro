<section id="capabilities" class="bento-section">
    <div class="container">
        <div class="header-grid reveal">
            <div class="header-content">
                <span class="section-subtitle mono">// CORE_COMPETENCIES</span>
                <h2 class="section-title">Ingeniería sin Deuda Técnica.</h2>
                <p class="section-desc">
                    Escribimos código limpio, mantenible y escalable. Nos
                    obsesiona la topología de red y la seguridad desde el
                    diseño.
                </p>
            </div>

            <div class="stat-box">
                <div class="stat-row">
                    <span class="stat-label"
                        ><span class="c-accent">●</span> System Health</span
                    >
                    <span class="stat-val">99.9%</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Tech Debt</span>
                    <span class="stat-val" style="color: #666;">0.0%</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Test Coverage</span>
                    <span class="stat-val">98.5%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill"></div>
                </div>
            </div>
        </div>

        <div id="cards" class="bento-grid">
            <div class="card col-span-2 reveal">
                <div class="card-icon">
                    <svg
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M17.5 19c0-1.7-1.3-3-3-3h-1.1c-.1-2.9-2.4-5.2-5.3-5.2-2.5 0-4.6 1.7-5.1 4.1H2c-1.7 0-3 1.3-3 3s1.3 3 3 3h15.5c1.7 0 3-1.3 3-3z"
                        ></path></svg
                    >
                </div>
                <div>
                    <h3>Cloud-Native Orchestration</h3>
                    <p>
                        Diseñamos sistemas distribuidos tolerantes a fallos.
                        Implementamos estrategias multi-zona en AWS/Azure para
                        garantizar disponibilidad (HA). Kubernetes para
                        orquestación eficiente.
                    </p>
                </div>
                <div class="tags-container">
                    <span class="pill">EKS / AKS</span>
                    <span class="pill">Service Mesh</span>
                    <span class="pill">Auto-Scaling</span>
                </div>
            </div>

            <div class="card reveal">
                <div class="card-icon">
                    <svg
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><polyline points="23 4 23 10 17 10"></polyline><path
                            d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg
                    >
                </div>
                <div>
                    <h3>Monolith Deconstruction</h3>
                    <p>
                        Patrón <em>Strangler Fig</em> para extraer microservicios
                        de monolitos legacy sin detener la operación.
                    </p>
                </div>
                <div class="tags-container">
                    <span class="pill">Refactoring</span><span class="pill"
                        >DDD</span
                    >
                </div>
            </div>

            <div class="card reveal">
                <div class="card-icon">
                    <svg
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><polyline points="16 18 22 12 16 6"
                        ></polyline><polyline points="8 6 2 12 8 18"
                        ></polyline></svg
                    >
                </div>
                <div>
                    <h3>Infrastructure as Code</h3>
                    <p>
                        Tu infraestructura versionada en Git. Entornos efímeros
                        creados en minutos con Terraform.
                    </p>
                </div>
                <div class="tags-container">
                    <span class="pill">Terraform</span><span class="pill"
                        >Ansible</span
                    >
                </div>
            </div>

            <div class="card col-span-2 reveal">
                <div class="card-icon">
                    <svg
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><rect x="3" y="11" width="18" height="11" rx="2" ry="2"
                        ></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg
                    >
                </div>
                <div>
                    <h3>DevSecOps & Compliance</h3>
                    <p>
                        Integramos SAST/DAST en el pipeline. Gestionamos
                        secretos con Vault y aplicamos políticas Zero-Trust para
                        cumplir con normas bancarias (HIPAA/SOC2).
                    </p>
                </div>
                <div class="tags-container">
                    <span class="pill">Vault</span><span class="pill"
                        >SonarQube</span
                    ><span class="pill">OWASP</span>
                </div>
            </div>

            <div class="card reveal">
                <div class="card-icon">
                    <svg
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path
                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
                        ></path></svg
                    >
                </div>
                <div>
                    <h3>Event-Driven Data</h3>
                    <p>
                        Arquitecturas asíncronas con Kafka. Procesamiento de
                        streams en tiempo real.
                    </p>
                </div>
                <div class="tags-container">
                    <span class="pill">Kafka</span><span class="pill"
                        >RabbitMQ</span
                    >
                </div>
            </div>

            <div class="card reveal">
                <div class="card-icon">
                    <svg
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><polygon
                            points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"
                        ></polygon></svg
                    >
                </div>
                <div>
                    <h3>High Performance</h3>
                    <p>
                        Optimización de latencia. Caching agresivo con Redis y
                        tuning de DB.
                    </p>
                </div>
                <div class="tags-container">
                    <span class="pill">Redis</span><span class="pill"
                        >Sharding</span
                    >
                </div>
            </div>

            <div class="card reveal">
                <div class="card-icon">
                    <svg
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        ><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                        ></path><circle cx="12" cy="12" r="3"></circle><path
                            d="M12 2v2"></path><path d="M12 20v2"></path><path
                            d="M20.66 4.34l-1.42 1.42"></path><path
                            d="M4.76 18.24l-1.42 1.42"></path><path
                            d="M20.66 19.66l-1.42-1.42"></path><path
                            d="M4.76 5.76l-1.42-1.42"></path></svg
                    >
                </div>
                <div>
                    <h3>Deep Observability</h3>
                    <p>
                        Distributed Tracing para visualizar el ciclo de vida
                        completo de una petición.
                    </p>
                </div>
                <div class="tags-container">
                    <span class="pill">Grafana</span><span class="pill"
                        >OpenTelemetry</span
                    >
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    const cardsContainer = document.getElementById("cards");
    const cards = Array.from(document.querySelectorAll(".card"));

    if (cardsContainer && cards.length > 0) {
        cardsContainer.addEventListener("mousemove", (e) => {
            cards.forEach((card) => {
                const rect = card.getBoundingClientRect();
                // @ts-ignore
                const x = e.clientX - rect.left;
                // @ts-ignore
                const y = e.clientY - rect.top;
                // @ts-ignore
                card.style.setProperty("--mouse-x", `${x}px`);
                // @ts-ignore
                card.style.setProperty("--mouse-y", `${y}px`);
            });
        });
    }
</script>

<style>
    .bento-section {
        padding: var(--section-padding);
    }
    .header-grid {
        display: grid;
        grid-template-columns: 1fr 320px;
        gap: 40px;
        align-items: flex-end;
        margin-bottom: 60px;
        max-width: 1000px;
    }
    .stat-box {
        background: linear-gradient(
            145deg,
            rgba(255, 255, 255, 0.03) 0%,
            rgba(0, 0, 0, 0.2) 100%
        );
        border: 1px solid var(--border);
        padding: 24px;
        border-radius: 12px;
        font-family: var(--font-code);
        font-size: 0.8rem;
        position: relative;
        backdrop-filter: blur(10px);
        box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.5);
    }
    .stat-box::after {
        content: "";
        position: absolute;
        top: -1px;
        left: 20px;
        right: 20px;
        height: 1px;
        background: linear-gradient(
            90deg,
            transparent,
            var(--accent),
            transparent
        );
        opacity: 0.5;
    }
    .stat-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        color: #888;
        border-bottom: 1px dashed rgba(255, 255, 255, 0.05);
        padding-bottom: 4px;
    }
    .stat-row:last-of-type {
        border-bottom: none;
    }
    .stat-val {
        color: var(--text-main);
        font-weight: 600;
    }
    .progress-bar {
        width: 100%;
        height: 4px;
        background: #222;
        margin-top: 10px;
        border-radius: 2px;
        overflow: hidden;
    }
    .progress-fill {
        height: 100%;
        background: var(--accent);
        width: 0%;
        animation: fillBar 2s ease-out forwards;
    }
    @keyframes fillBar {
        to {
            width: 98%;
        }
    }

    .bento-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
        grid-auto-rows: minmax(340px, auto);
    }
    .col-span-2 {
        grid-column: span 2;
    }
    .card {
        background-color: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 36px;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        transition: border-color 0.3s ease;
    }
    .card::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 12px;
        padding: 1px;
        background: radial-gradient(
            800px circle at var(--mouse-x) var(--mouse-y),
            rgba(255, 255, 255, 0.1),
            transparent 40%
        );
        -webkit-mask:
            linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0;
        transition: opacity 0.5s;
        pointer-events: none;
    }
    .bento-grid:hover .card::before {
        opacity: 1;
    }
    .card:hover {
        border-color: rgba(255, 255, 255, 0.2);
    }
    .card-icon {
        width: 50px;
        height: 50px;
        background: #111;
        border: 1px solid var(--border);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 28px;
        color: var(--text-main);
    }
    .card h3 {
        font-size: 1.3rem;
        margin-bottom: 16px;
        font-weight: 600;
        color: #fff;
    }
    .card p {
        color: var(--text-muted);
        font-size: 0.95rem;
        line-height: 1.7;
        margin-bottom: 24px;
    }
    .tags-container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: auto;
    }
    .pill {
        font-size: 0.7rem;
        font-family: var(--font-code);
        padding: 6px 12px;
        border-radius: 4px;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid var(--border);
        color: #777;
    }

    @media (max-width: 1024px) {
        .bento-grid {
            grid-template-columns: repeat(2, 1fr);
        }
        .col-span-2 {
            grid-column: span 2;
        }
    }
    @media (max-width: 900px) {
        .header-grid {
            grid-template-columns: 1fr;
            gap: 24px;
        }
        .stat-box {
            width: 100%;
        }
    }
    @media (max-width: 768px) {
        .bento-grid {
            grid-template-columns: 1fr;
        }
        .col-span-2 {
            grid-column: span 1;
        }
    }
</style>
